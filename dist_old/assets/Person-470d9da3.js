import{g as H,f as d,q as J,k as X,s as Z,r as i,o as c,a as v,b as t,d as o,l as s,n as f,t as m,v as w,x as C}from"./index-254ebb3c.js";import{C as ee}from"./CrudService-9e941e24.js";const le={class:"grid"},te={class:"col-12"},ae={class:"card"},oe={class:"my-2"},se={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ne=t("h5",{class:"m-0"},"Персоны",-1),ie={class:"block mt-2 md:mt-0 p-input-icon-left"},ue=t("i",{class:"pi pi-search"},null,-1),de=t("span",{class:"p-column-title"},"Username",-1),re=t("span",{class:"p-column-title"},"Имя",-1),ce=t("span",{class:"p-column-title"},"Фамилия",-1),ve=t("span",{class:"p-column-title"},"Локальная",-1),me=t("span",{class:"p-column-title"},"Агент(ID)",-1),pe=t("span",{class:"p-column-title"},"Подписчик(ID)",-1),_e=["src","alt"],fe={class:"field"},be=t("label",{for:"name"},"Name",-1),ye={key:0,class:"p-invalid"},he={class:"field"},ge=t("label",{for:"description"},"Description",-1),Se={class:"field"},ke=t("label",{for:"inventoryStatus",class:"mb-3"},"Inventory Status",-1),we={key:0},Ce={key:1},Ve={key:2},xe={class:"field"},De=t("label",{class:"mb-3"},"Category",-1),Ue={class:"formgrid grid"},Te={class:"field-radiobutton col-6"},Pe=t("label",{for:"category1"},"Accessories",-1),Ie={class:"field-radiobutton col-6"},Ne=t("label",{for:"category2"},"Clothing",-1),Le={class:"field-radiobutton col-6"},qe=t("label",{for:"category3"},"Electronics",-1),Be={class:"field-radiobutton col-6"},Fe=t("label",{for:"category4"},"Fitness",-1),Oe={class:"formgrid grid"},Me={class:"field col"},Re=t("label",{for:"price"},"Price",-1),Ae={key:0,class:"p-invalid"},Ke={class:"field col"},ze=t("label",{for:"quantity"},"Quantity",-1),$e={class:"flex align-items-center justify-content-center"},je=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ee={key:0},Ye={class:"flex align-items-center justify-content-center"},Qe=t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),We={key:0},Xe={__name:"Person",setup(Ge){const g=H(),r=d(null),b=d(!1),S=d(!1),k=d(!1),l=d({}),y=d(null),U=d(null),V=d({}),_=d(!1),I=d([{label:"INSTOCK",value:"instock"},{label:"LOWSTOCK",value:"lowstock"},{label:"OUTOFSTOCK",value:"outofstock"}]),N=new ee("/api/ucc/aw/person",g);J(()=>{$()}),X(()=>{N.read(null).then(n=>r.value=n)});const L=()=>{l.value={},_.value=!1,b.value=!0},q=()=>{b.value=!1,_.value=!1},B=()=>{_.value=!0,l.value.name&&l.value.name.trim()&&l.value.price&&(l.value.id?(l.value.inventoryStatus=l.value.inventoryStatus.value?l.value.inventoryStatus.value:l.value.inventoryStatus,l.value[R(l.value.id)]=l.value,g.add({severity:"success",summary:"Successful",detail:"Product Updated",life:3e3})):(l.value.id=createId(),l.value.code=createId(),l.value.image="person-placeholder.svg",l.value.inventoryStatus=l.value.inventoryStatus?l.value.inventoryStatus.value:"INSTOCK",r.value.push(l.value),g.add({severity:"success",summary:"Successful",detail:"Product Created",life:3e3})),b.value=!1,l.value={})},F=n=>{l.value={...n},console.log(l),b.value=!0},O=n=>{l.value=n,S.value=!0},M=()=>{r.value=r.value.filter(n=>n.id!==l.value.id),S.value=!1,l.value={},g.add({severity:"success",summary:"Successful",detail:"Person Deleted",life:3e3})},R=n=>{let a=-1;for(let h=0;h<r.value.length;h++)if(r.value[h].id===n){a=h;break}return a},A=()=>{U.value.exportCSV()},K=()=>{k.value=!0},z=()=>{r.value=r.value.filter(n=>!y.value.includes(n)),k.value=!1,y.value=null,g.add({severity:"success",summary:"Successful",detail:"Products Deleted",life:3e3})},$=()=>{V.value={global:{value:null,matchMode:Z.CONTAINS}}};return(n,a)=>{const h=i("Toast"),u=i("Button"),j=i("FileUpload"),E=i("Toolbar"),T=i("InputText"),p=i("Column"),Y=i("DataTable"),Q=i("Textarea"),W=i("Dropdown"),x=i("RadioButton"),P=i("InputNumber"),D=i("Dialog");return c(),v("div",le,[t("div",te,[t("div",ae,[o(h),o(E,{class:"mb-4"},{start:s(()=>[t("div",oe,[o(u,{label:"Новый",icon:"pi pi-plus",class:"p-button-success mr-2",onClick:L}),o(u,{label:"Удалить",icon:"pi pi-trash",class:"p-button-danger",onClick:K,disabled:!y.value||!y.value.length},null,8,["disabled"])])]),end:s(()=>[o(j,{mode:"basic",accept:"image/*",maxFileSize:1e6,label:"Импорт",chooseLabel:"Импорт",class:"mr-2 inline-block","upload-icon":"pi pi-download"}),o(u,{label:"Экспорт CSV",icon:"pi pi-upload",class:"p-button-help",onClick:a[0]||(a[0]=e=>A(e))})]),_:1}),o(Y,{ref_key:"dt",ref:U,value:r.value,selection:y.value,"onUpdate:selection":a[2]||(a[2]=e=>y.value=e),dataKey:"id",paginator:!0,rows:10,filters:V.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50],currentPageReportTemplate:"Показано {first} в {last} из {totalRecords} персон",responsiveLayout:"scroll"},{header:s(()=>[t("div",se,[ne,t("span",ie,[ue,o(T,{modelValue:V.value.global.value,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value.global.value=e),placeholder:"Поиск..."},null,8,["modelValue"])])])]),default:s(()=>[o(p,{selectionMode:"multiple",headerStyle:"width: 3rem"}),o(p,{field:"username",header:"Username",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(e=>[de,f(" "+m(e.data.username),1)]),_:1}),o(p,{field:"firstname",header:"Имя",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(e=>[re,f(" "+m(e.data.firstname),1)]),_:1}),o(p,{field:"lastname",header:"Фамилия",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(e=>[ce,f(" "+m(e.data.lastname),1)]),_:1}),o(p,{field:"local",header:"Локальная",sortable:!1,headerStyle:"width:14%; min-width:10rem;"},{body:s(e=>[ve,t("i",{class:w("text-center pi pi-fw pi-"+(e.data.local?"check-circle":"circle"))},null,2)]),_:1}),o(p,{field:"local",header:"Агент(ID)",sortable:!1,headerStyle:"width:14%; min-width:10rem;"},{body:s(e=>[me,f(" "+m(e.data.agent_id),1)]),_:1}),o(p,{field:"local",header:"Подписчик(ID)",sortable:!1,headerStyle:"width:14%; min-width:10rem;"},{body:s(e=>[pe,f(" "+m(e.data.subscriber_id),1)]),_:1}),o(p,{headerStyle:"min-width:10rem;"},{body:s(e=>[o(u,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:G=>F(e.data)},null,8,["onClick"]),o(u,{icon:"pi pi-trash",class:"p-button-rounded p-button-warning mt-2",onClick:G=>O(e.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"]),o(D,{visible:b.value,"onUpdate:visible":a[12]||(a[12]=e=>b.value=e),style:{width:"450px"},header:"Детали о персоне",modal:!0,class:"p-fluid"},{footer:s(()=>[o(u,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:q}),o(u,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:B})]),default:s(()=>[l.value.image?(c(),v("img",{key:0,src:"demo/images/person/"+l.value.image,alt:l.value.image,width:"150",class:"mt-0 mx-auto mb-5 block shadow-2"},null,8,_e)):C("",!0),t("div",fe,[be,o(T,{id:"name",modelValue:l.value.name,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.name=e),modelModifiers:{trim:!0},required:"true",autofocus:"",class:w({"p-invalid":_.value&&!l.value.name})},null,8,["modelValue","class"]),_.value&&!l.value.name?(c(),v("small",ye,"Name is required.")):C("",!0)]),t("div",he,[ge,o(Q,{id:"description",modelValue:l.value.description,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.description=e),required:"true",rows:"3",cols:"20"},null,8,["modelValue"])]),t("div",Se,[ke,o(W,{id:"inventoryStatus",modelValue:l.value.inventoryStatus,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.inventoryStatus=e),options:I.value,optionLabel:"label",placeholder:"Select a Status"},{value:s(e=>[e.value&&e.value.value?(c(),v("div",we,[t("span",{class:w("person-badge status-"+e.value.value)},m(e.value.label),3)])):e.value&&!e.value.value?(c(),v("div",Ce,[t("span",{class:w("person-badge status-"+e.value.toLowerCase())},m(e.value),3)])):(c(),v("span",Ve,m(e.placeholder),1))]),_:1},8,["modelValue","options"])]),t("div",xe,[De,t("div",Ue,[t("div",Te,[o(x,{id:"category1",name:"category",value:"Accessories",modelValue:l.value.category,"onUpdate:modelValue":a[6]||(a[6]=e=>l.value.category=e)},null,8,["modelValue"]),Pe]),t("div",Ie,[o(x,{id:"category2",name:"category",value:"Clothing",modelValue:l.value.category,"onUpdate:modelValue":a[7]||(a[7]=e=>l.value.category=e)},null,8,["modelValue"]),Ne]),t("div",Le,[o(x,{id:"category3",name:"category",value:"Electronics",modelValue:l.value.category,"onUpdate:modelValue":a[8]||(a[8]=e=>l.value.category=e)},null,8,["modelValue"]),qe]),t("div",Be,[o(x,{id:"category4",name:"category",value:"Fitness",modelValue:l.value.category,"onUpdate:modelValue":a[9]||(a[9]=e=>l.value.category=e)},null,8,["modelValue"]),Fe])])]),t("div",Oe,[t("div",Me,[Re,o(P,{id:"price",modelValue:l.value.price,"onUpdate:modelValue":a[10]||(a[10]=e=>l.value.price=e),mode:"currency",currency:"USD",locale:"en-US",class:w({"p-invalid":_.value&&!l.value.price}),required:!0},null,8,["modelValue","class"]),_.value&&!l.value.price?(c(),v("small",Ae,"Price is required.")):C("",!0)]),t("div",Ke,[ze,o(P,{id:"quantity",modelValue:l.value.quantity,"onUpdate:modelValue":a[11]||(a[11]=e=>l.value.quantity=e),integeronly:""},null,8,["modelValue"])])])]),_:1},8,["visible"]),o(D,{visible:S.value,"onUpdate:visible":a[14]||(a[14]=e=>S.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:s(()=>[o(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[13]||(a[13]=e=>S.value=!1)}),o(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:M})]),default:s(()=>[t("div",$e,[je,l.value?(c(),v("span",Ee,[f("Are you sure you want to delete "),t("b",null,m(l.value.name),1),f("?")])):C("",!0)])]),_:1},8,["visible"]),o(D,{visible:k.value,"onUpdate:visible":a[16]||(a[16]=e=>k.value=e),style:{width:"450px"},header:"Confirm",modal:!0},{footer:s(()=>[o(u,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:a[15]||(a[15]=e=>k.value=!1)}),o(u,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:z})]),default:s(()=>[t("div",Ye,[Qe,l.value?(c(),v("span",We,"Are you sure you want to delete the selected persons?")):C("",!0)])]),_:1},8,["visible"])])])])}}};export{Xe as default};
